<?php
$headers = array(_("Name"), _("Dateiname"), _("Typ"), _("Letzte Änderung"), _("Größe in kB"));
$items = array();
foreach ($dateien as $datei) {
    $items[] = array(
        'content' => array(
            $datei['name'],
            $datei['filename'],
            StgFile::getDokuTypName($datei['doku_typ_id']),
            $datei['chdate'],
            $datei['filesize'] ? round($datei['filesize'] / 1024, 2) : "0"
        ),
        'url' => URLHelper::getLink("?", array('doku_id' => $datei->getId())),
        'item' => $datei
    );
}
if (PersonalRechte::isRoot() || PersonalRechte::isPamt() || PersonalRechte::isIamt()) {
    $neu = URLHelper::getLink("?", array('doku_id' => "neu"));
}
$preformatted = true;
?>
<h1 style="text-align: center;"><?= _("Dokumente") ?></h1>

<select id="prefilter" onChange="jQuery('#table_filter').val(this.value).trigger('keyup');" style="display: block; margin: 3px; margin-left: auto; margin-right: auto;">
    <option value=""><?= _("Typ auswählen") ?></option>
</select>
<script>
    jQuery(function () {
        jQuery('table.zsb_editable > tbody > tr > td:nth-child(3) ').each(function (index, value) {
            if (jQuery('#prefilter > option[value=' + jQuery(value).text() + ']').length === 0) {
                jQuery('#prefilter').append('<option value="' + jQuery(value).text() + '">' + jQuery(value).text() + '</option>');
            }
        });
    });
</script>

<?= $this->render_partial("zsb/partials/editable.php", compact("headers", "items", "preformatted", "neu")) ?>